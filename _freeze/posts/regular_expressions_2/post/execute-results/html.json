{
  "hash": "cf64d524c4d4f2a3a54dc4fd57edbcce",
  "result": {
    "markdown": "---\ntitle: \"Mastering Regular Expressions: Dealing with String Data in R, Part II\"\ndate: \"2024-06-21\"\ncategories: ['R', 'tidyverse', 'regex', 'string', 'text']\ndescription: \"Solving R for Data Science (2ed) Exercises\"\nexecute: \n  message: false\n  warning: false\neditor_options: \n  chunk_output_type: console\nformat: \n  html\n---\n\n\n# Introduction\n\nRegular expressions (regex) are a powerful tool for working with string data in R. They might seem complex at first, but with some practice, they can become an invaluable part of your data science toolkit. In this blog post, we will tackle the last four exercises from the [\"R for Data Science\" (2nd edition) book](https://r4ds.hadley.nz/) on regular expressions. You can find the first part of the exercises [here](https://carlosepistats.github.io/blog/posts/regular_expressions/post.html).\n\nLet's dive into the world of regex and see how we can manipulate and search text data effectively.\n\n# Setting Up\n\nFirst, let's load the necessary library:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n# Exercise 4: British and American Spellings\n\n**Question:** Create 11 regular expressions that match the British or American spellings for each of the following words: airplane/aeroplane, aluminum/aluminium, analog/analogue, ass/arse, center/centre, defense/defence, donut/doughnut, gray/grey, modeling/modelling, skeptic/sceptic, summarize/summarise. Try to make the sorthest possible regex!\n\n**Solution:**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# airplane/aeroplane\nstrings <- c(\"airplane\", \"aeroplane\")\nstr_view(strings, \"a[ei]ro?plane\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <airplane>\n[2] │ <aeroplane>\n```\n:::\n\n```{.r .cell-code}\n# aluminum/aluminium\nstrings <- c(\"aluminum\", \"aluminium\")\nstr_view(strings, \"alumini?um\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <aluminum>\n[2] │ <aluminium>\n```\n:::\n\n```{.r .cell-code}\n# analog/analogue\nstrings <- c(\"analog\", \"analogue\")\nstr_view(strings, \"analog(ue)?\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <analog>\n[2] │ <analogue>\n```\n:::\n\n```{.r .cell-code}\n# ass/arse\nstrings <- c(\"ass\", \"arse\")\nstr_view(strings, \"a[rs]se?\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <ass>\n[2] │ <arse>\n```\n:::\n\n```{.r .cell-code}\n# center/centre\nstrings <- c(\"center\", \"centre\")\nstr_view(strings, \"cent(er|re)\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <center>\n[2] │ <centre>\n```\n:::\n\n```{.r .cell-code}\n# defense/defence\nstrings <- c(\"defense\", \"defence\")\nstr_view(strings, \"defen[cs]e\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <defense>\n[2] │ <defence>\n```\n:::\n\n```{.r .cell-code}\n# donut/doughnut\nstrings <- c(\"donut\", \"doughnut\")\nstr_view(strings, \"do(ugh)?nut\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <donut>\n[2] │ <doughnut>\n```\n:::\n\n```{.r .cell-code}\n# gray/grey\nstrings <- c(\"gray\", \"grey\")\nstr_view(strings, \"gr[ae]y\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <gray>\n[2] │ <grey>\n```\n:::\n\n```{.r .cell-code}\n# modeling/modelling\nstrings <- c(\"modeling\", \"modelling\")\nstr_view(strings, \"modell?ing\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <modeling>\n[2] │ <modelling>\n```\n:::\n\n```{.r .cell-code}\n# skeptic/sceptic\nstrings <- c(\"skeptic\", \"sceptic\")\nstr_view(strings, \"s[ck]eptic\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <skeptic>\n[2] │ <sceptic>\n```\n:::\n\n```{.r .cell-code}\n# summarize/summarise\nstrings <- c(\"summarize\", \"summarise\")\nstr_view(strings, \"summari[sz]e\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <summarize>\n[2] │ <summarise>\n```\n:::\n:::\n\n\n# Exercise 5: Switching First and Last Letters\n\n**Question:** Switch the first and last letters in `words`. Which of those strings are still `words`?\n\n**Solution:**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Inspect `words`\nstr_view(words)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] │ a\n [2] │ able\n [3] │ about\n [4] │ absolute\n [5] │ accept\n [6] │ account\n [7] │ achieve\n [8] │ across\n [9] │ act\n[10] │ active\n[11] │ actual\n[12] │ add\n[13] │ address\n[14] │ admit\n[15] │ advertise\n[16] │ affect\n[17] │ afford\n[18] │ after\n[19] │ afternoon\n[20] │ again\n... and 960 more\n```\n:::\n\n```{.r .cell-code}\n# Replace first letter with last letter\nwords_switch <- str_replace(words, \"(^.)(.*)(.$)\", \"\\\\3\\\\2\\\\1\")\n\n# Explore that the change is correct\ncbind(words, words_switch) |> head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     words      words_switch\n[1,] \"a\"        \"a\"         \n[2,] \"able\"     \"ebla\"      \n[3,] \"about\"    \"tboua\"     \n[4,] \"absolute\" \"ebsoluta\"  \n[5,] \"accept\"   \"tccepa\"    \n[6,] \"account\"  \"tccouna\"   \n```\n:::\n\n```{.r .cell-code}\n# View words that are the same as their switched counterparts\nstr_view(words[words == words_switch])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] │ a\n [2] │ america\n [3] │ area\n [4] │ dad\n [5] │ dead\n [6] │ depend\n [7] │ educate\n [8] │ else\n [9] │ encourage\n[10] │ engine\n[11] │ europe\n[12] │ evidence\n[13] │ example\n[14] │ excuse\n[15] │ exercise\n[16] │ expense\n[17] │ experience\n[18] │ eye\n[19] │ health\n[20] │ high\n... and 17 more\n```\n:::\n:::\n\n\n# Exercise 6: Describing Regular Expressions\n\n**Question:** Describe in words what these regular expressions match (read carefully to see if each entry is a regular expression or a string that defines a regular expression):\n\na.  `^.*$`\nb.  `\"\\\\{.+\\\\}\"`\nc.  `\\d{4}-\\d{2}-\\d{2}`\nd.  `\"\\\\\\\\{4}\"`\ne.  `\\..\\..\\..`\nf.  `(.)\\1\\1`\ng.  `\"(..)\\\\1\"`\n\n**Solution:**\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# ^.*$\n# Matches any string, including an empty string, from start to end.\nstrings <- c(\"hello\", \"hello world\", \"\")\nstr_view(strings, \"^.*$\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <hello>\n[2] │ <hello world>\n[3] │ <>\n```\n:::\n\n```{.r .cell-code}\n# \"\\\\{.+\\\\}\"\n# Matches one or more characters enclosed in curly braces {}.\nstrings <- c(\"{1}\", \"{1234}\", \"{}\")\nstr_view(strings, \"\\\\{.+\\\\}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <{1}>\n[2] │ <{1234}>\n```\n:::\n\n```{.r .cell-code}\n# \\d{4}-\\d{2}-\\d{2}\n# Matches numbers in the format YYYY-MM-DD.\nstrings <- c(\"2023-06-19\", \"5678-56-56\")\nstr_view(strings, \"\\\\d{4}-\\\\d{2}-\\\\d{2}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <2023-06-19>\n[2] │ <5678-56-56>\n```\n:::\n\n```{.r .cell-code}\n# \"\\\\\\\\{4}\"\n# Matches exactly four backslashes.\nstrings <- c(r\"(\\\\\\\\)\", r\"(\\\\\\\\\\\\)\", \"####\")\nstr_view(strings, \"\\\\\\\\{4}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <\\\\\\\\>\n[2] │ <\\\\\\\\>\\\\\n```\n:::\n\n```{.r .cell-code}\n# \\..\\..\\..\n# Matches three characters separated by dots, e.g., .a.b.c\nstrings <- c(\".a.b.c\", \".1.2.3\", \".x.y.z\")\nstr_view(strings, \"\\\\..\\\\..\\\\..\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <.a.b.c>\n[2] │ <.1.2.3>\n[3] │ <.x.y.z>\n```\n:::\n\n```{.r .cell-code}\n# (.)\\1\\1\n# Matches any character repeated three times in a row.\nstrings <- c(\"aaab\", \"bbbc\", \"ccc\")\nstr_view(strings, \"(.)\\\\1\\\\1\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <aaa>b\n[2] │ <bbb>c\n[3] │ <ccc>\n```\n:::\n\n```{.r .cell-code}\n# \"(..)\\\\1\"\n# Matches two characters repeated consecutively.\nstrings <- c(\"abab\", \"1212\", \"cdcd\")\nstr_view(strings, \"(..)\\\\1\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] │ <abab>\n[2] │ <1212>\n[3] │ <cdcd>\n```\n:::\n:::\n\n\n# Exercise 7: Solving Beginner Regexp Crosswords\n\n**Question:** Solve the beginner regexp crosswords (<https://oreil.ly//Db3NF>).\n\n**Solution:**\n\nHere are the solutions to the beginner regex crosswords:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Check crosswords function\ncheck_crosswords <- function(pattern_row_1, pattern_row_2, pattern_column_1, pattern_column_2, solution){\nsolution <- matrix(solution, nrow = 2, byrow = TRUE)\ncorrect <- str_detect(str_flatten(solution[1, ]), pattern_row_1) & \n   str_detect(str_flatten(solution[2, ]), pattern_row_2) &\n   str_detect(str_flatten(solution[, 1]), pattern_column_1) &\n   str_detect(str_flatten(solution[, 2]), pattern_column_2)\ncorrect\n}\n```\n:::\n\n\n## Crossword 1\n\n![](Screenshot%202024-06-21%20121408.png)\n\n\n::: {.cell}\n\n```{.r .cell-code}\npattern_row_1 <- \"HE|LL|O+\"\npattern_row_2 <- \"[PLEASE]+\"\npattern_column_1 <- \"[^SPEAK]+\"\npattern_column_2 <- \"EP|IP|EF\"\n\nsolution <- c(\"H\", \"E\", \"L\", \"P\")\n\ncheck_crosswords(pattern_row_1, pattern_row_2, pattern_column_1, pattern_column_2, solution)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\n\n## Crossword 2\n\n![](images/clipboard-1019878229.png)\n\n\n::: {.cell}\n\n```{.r .cell-code}\npattern_row_1 <- \".*M?O.*\"\npattern_row_2 <- \"(AN|FE|BE)\"\npattern_column_1 <- \"(A|B|C)\\\\1\"\npattern_column_2 <- \"(AB|OE|SK)\"\n\nsolution <- c(\"B\", \"O\", \"B\", \"E\")\n\ncheck_crosswords(pattern_row_1, pattern_row_2, pattern_column_1, pattern_column_2, solution)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\n\n## Crossword 3\n\n![](images/clipboard-420531577.png)\n\n\n::: {.cell}\n\n```{.r .cell-code}\npattern_row_1 <- \"(.)+\\\\1\"\npattern_row_2 <- \"[^ABRC]+\"\npattern_column_1 <- \"[COBRA]+\"\npattern_column_2 <- \"(AB|O|OR)+\"\n\nsolution <- c(\"O\", \"O\", \"O\", \"O\")\n\ncheck_crosswords(pattern_row_1, pattern_row_2, pattern_column_1, pattern_column_2, solution)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\n\n## Crossword 4\n\n![](images/clipboard-3189841030.png)\n\n\n::: {.cell}\n\n```{.r .cell-code}\npattern_row_1 <- \"[*]+\"\npattern_row_2 <- \"/+\"\npattern_column_1 <- \".?.+\"\npattern_column_2 <- \".+\"\n\nsolution <- c(\"*\", \"*\", \"/\", \"/\")\n\ncheck_crosswords(pattern_row_1, pattern_row_2, pattern_column_1, pattern_column_2, solution)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\n\n## Crossword 5\n\n![](images/clipboard-3908736113.png)\n\n\n::: {.cell}\n\n```{.r .cell-code}\npattern_row_1 <- \"18|19|20\"\npattern_row_2 <- \"[6789]\\\\d\"\npattern_column_1 <- \"\\\\d[2480]\"\npattern_column_2 <- \"56|94|73\"\n\nsolution <- c(\"1\", \"9\", \"8\", \"4\")\n\ncheck_crosswords(pattern_row_1, pattern_row_2, pattern_column_1, pattern_column_2, solution)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\n\n# Conclusion\n\nRegular expressions are a robust tool for string manipulation and text data analysis in R. While they may seem intimidating initially, with practice, they become a powerful asset in your data science toolkit. Through these exercises, we've explored various ways to utilize regex to solve complex text processing tasks, from matching patterns in different spellings to switching letters in words and solving regex-based puzzles. Keep practicing and experimenting with regular expressions to unlock their full potential in your data analysis projects.\n\nHappy regexing!\n\n# References\n\n-   Mastering Regular Expressions: Dealing with String Data in R, Part I. EpiStats Blog. <https://carlosepistats.github.io/blog/posts/regular_expressions/post.html>\n\n-   R for Data Science (2ed), written by Hadley Wickham, Mine Çetinkaya-Rundel, and Garrett Grolemund. <https://r4ds.hadley.nz/>\n\n-   Wickham H, Averick M, Bryan J, Chang W, McGowan LD, François R, Grolemund G, Hayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller E, Bache SM, Müller K, Ooms J, Robinson D, Seidel DP, Spinu V, Takahashi K, Vaughan D, Wilke C, Woo K, Yutani H (2019). \"Welcome to the tidyverse.\" *Journal of Open Source Software*, *4*(43), 1686. doi:10.21105/joss.01686 <https://doi.org/10.21105/joss.01686>.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}