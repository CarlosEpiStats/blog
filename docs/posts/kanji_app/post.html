<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Carlos Fernández">
<meta name="dcterms.date" content="2024-03-06">
<meta name="description" content="Using R Shiny to interactively explore data, with a Japanese Kanji database example.">

<title>EpiStats - Interactive List of Japanese Words Using R Shiny Apps</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<link href="../../site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="../../site_libs/tabwid-1.1.3/tabwid.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">EpiStats</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="dropdown-header">
 <span class="menu-text">about.qmd</span></li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="../../blog.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/CarlosEpiStats" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-resources" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Resources</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-resources">    
        <li>
    <a class="dropdown-item" href="https://rweekly.org" rel="" target="">
 <span class="dropdown-text">R Weekly</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.r-bloggers.com" rel="" target="">
 <span class="dropdown-text">R Bloggers</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../archive.html" rel="" target="">
 <span class="menu-text">Archivo</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#app-design" id="toc-app-design" class="nav-link" data-scroll-target="#app-design">App Design</a></li>
  <li><a href="#shiny-app" id="toc-shiny-app" class="nav-link" data-scroll-target="#shiny-app">Shiny App</a></li>
  <li><a href="#code-breakdown" id="toc-code-breakdown" class="nav-link" data-scroll-target="#code-breakdown">Code Breakdown</a>
  <ul class="collapse">
  <li><a href="#setup-and-loading-data" id="toc-setup-and-loading-data" class="nav-link" data-scroll-target="#setup-and-loading-data">Setup and Loading Data</a></li>
  <li><a href="#custom-functions-to-create-the-study-table" id="toc-custom-functions-to-create-the-study-table" class="nav-link" data-scroll-target="#custom-functions-to-create-the-study-table">Custom Functions to Create the Study Table</a></li>
  <li><a href="#shiny-app-code" id="toc-shiny-app-code" class="nav-link" data-scroll-target="#shiny-app-code">Shiny App Code</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Interactive List of Japanese Words Using R Shiny Apps</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">shiny</div>
    <div class="quarto-category">exploratory</div>
  </div>
  </div>

<div>
  <div class="description">
    Using R Shiny to interactively explore data, with a Japanese Kanji database example.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Carlos Fernández </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 6, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>In a <a href="https://carlosepistats.github.io/blog/posts/kanji/post.html">previous post</a>, I demonstrated how to use R to load, explore, and filter data from a dataset containing Japanese characters, known as “kanji”.</p>
<p>Today, we’ll focus on making that data exploration interactive using the R package <code>shiny</code>.</p>
</section>
<section id="app-design" class="level1">
<h1>App Design</h1>
<p>Every interactive app has at least three components: input, output, and a back-end server. The server transforms the user’s input into output. My “kanji app” has the following input and output:</p>
<p><strong>Input</strong>:</p>
<ul>
<li>A list of kanji that the user is currently learning.</li>
</ul>
<p><strong>Output</strong>:</p>
<ul>
<li>A table with all the possible words formed by combination of those kanji, as well as their pronunciation and an English translation. This table can be downloaded in CSV or XLSX format.</li>
<li>A table with example sentences that contain words formed by combination of those kanji, as well as their pronunciation and an English translation.</li>
<li>A table that displays how many different words contain each of the learning kanji.</li>
</ul>
</section>
<section id="shiny-app" class="level1">
<h1>Shiny App</h1>
<p>Here you can find the embedded version of this Shiny app. To access the full screen version, click on <a href="https://epistats.shinyapps.io/Kanji_app/">this link</a>.</p>
 <iframe id="example1" src="https://epistats.shinyapps.io/Kanji_app/" style="border: 1px solid black; width: 100%; height: 720px"></iframe>
</section>
<section id="code-breakdown" class="level1">
<h1>Code Breakdown</h1>
<section id="setup-and-loading-data" class="level2">
<h2 class="anchored" data-anchor-id="setup-and-loading-data">Setup and Loading Data</h2>
<p>To begin, we need to load the necessary libraries and import the datasets. I’ll use five different datasets to form the whole “dictionary”:</p>
<ul>
<li>A list of kanji downloaded from <a href="https://www.kanjidatabase.com/index.php">Kanji database</a></li>
<li>A list of jukugo (words composed by two kanji) downloaded from <a href="https://www.kanjidatabase.com/index.php">Kanji database</a></li>
<li>A list of words obtained from an Anki deck from <a href="https://ankiweb.net/shared/info/2141233552">here</a></li>
<li>A list of sentences obtained from an Anki deck from <a href="https://ankiweb.net/shared/info/1880390099">here</a></li>
<li>A dataset of Japanese numbers from 0 to 100, created manually.</li>
</ul>
<p>Each dataset contains three columns: <code>word</code> (in kanji), <code>pronunciation</code> (in hiragana or romaji), and <code>meaning</code> (in English).</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loading necessary libraries ####</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Loading datasets ####</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>file_kanji <span class="ot">&lt;-</span> <span class="st">"Kanji_20240227_081842.csv"</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>file_jukugo <span class="ot">&lt;-</span> <span class="st">"Jukugo_20240227_081908.csv"</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>file_words <span class="ot">&lt;-</span> <span class="st">"Optimized Kore - Sheet1.csv"</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>file_sentences1 <span class="ot">&lt;-</span> <span class="st">"Sentences.xlsx"</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>file_sentences2 <span class="ot">&lt;-</span> <span class="st">"Sentences_core.xlsx"</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="do">## Kanji list ####</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>data_kanji <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="fu">here</span>(<span class="st">"data/kanji"</span>, file_kanji)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="do">## Jukugo list ####</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>data_jukugo <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="fu">here</span>(<span class="st">"data/kanji"</span>, file_jukugo)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(frequency)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(comp_word, pronunciation, english_translation) <span class="sc">%&gt;%</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">word =</span> comp_word,</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>         <span class="at">meaning =</span> english_translation) <span class="sc">%&gt;%</span> </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(word, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Change romaji</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">pronunciation =</span> <span class="fu">gsub</span>(<span class="st">"zi"</span>, <span class="st">"ji"</span>, pronunciation),</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">pronunciation =</span> <span class="fu">gsub</span>(<span class="st">"zy"</span>, <span class="st">"jy"</span>, pronunciation),</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">pronunciation =</span> <span class="fu">gsub</span>(<span class="st">"ti"</span>, <span class="st">"chi"</span>, pronunciation),</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">pronunciation =</span> <span class="fu">gsub</span>(<span class="st">"ty"</span>, <span class="st">"ch"</span>, pronunciation),</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">pronunciation =</span> <span class="fu">gsub</span>(<span class="st">"si"</span>, <span class="st">"shi"</span>, pronunciation),</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">pronunciation =</span> <span class="fu">gsub</span>(<span class="st">"sy"</span>, <span class="st">"shy"</span>, pronunciation),</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">pronunciation =</span> <span class="fu">gsub</span>(<span class="st">"tu"</span>, <span class="st">"tsu"</span>, pronunciation),</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">pronunciation =</span> <span class="fu">gsub</span>(<span class="st">"hu"</span>, <span class="st">"fu"</span>, pronunciation)</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="do">## word list ####</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>data_words <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data/kanji"</span>, file_words)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(core_index) <span class="sc">%&gt;%</span> </span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(vocab_expression, vocab_kana, vocab_meaning) <span class="sc">%&gt;%</span> </span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">word =</span> vocab_expression,</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>         <span class="at">pronunciation =</span> vocab_kana,</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>         <span class="at">meaning =</span> vocab_meaning) <span class="sc">%&gt;%</span> </span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(word, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) </span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="do">## Number list ####</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>data_numbers <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">word =</span> <span class="fu">c</span>(<span class="st">"零"</span>, <span class="st">"一"</span>, <span class="st">"二"</span>, <span class="st">"三"</span>, <span class="st">"四"</span>, <span class="st">"五"</span>, <span class="st">"六"</span>, <span class="st">"七"</span>, <span class="st">"八"</span>, <span class="st">"九"</span>, <span class="st">"十"</span>, </span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>     <span class="st">"十一"</span>, <span class="st">"十二"</span>, <span class="st">"十三"</span>, <span class="st">"十四"</span>, <span class="st">"十五"</span>, <span class="st">"十六"</span>, <span class="st">"十七"</span>, <span class="st">"十八"</span>, <span class="st">"十九"</span>, </span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>     <span class="st">"二十"</span>, <span class="st">"二十一"</span>, <span class="st">"二十二"</span>, <span class="st">"二十三"</span>, <span class="st">"二十四"</span>, <span class="st">"二十五"</span>, <span class="st">"二十六"</span>, <span class="st">"二十七"</span>, </span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>     <span class="st">"二十八"</span>, <span class="st">"二十九"</span>, <span class="st">"三十"</span>, <span class="st">"三十一"</span>, <span class="st">"三十二"</span>, <span class="st">"三十三"</span>, <span class="st">"三十四"</span>, <span class="st">"三十五"</span>, </span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>     <span class="st">"三十六"</span>, <span class="st">"三十七"</span>, <span class="st">"三十八"</span>, <span class="st">"三十九"</span>, <span class="st">"四十"</span>, <span class="st">"四十一"</span>, <span class="st">"四十二"</span>, <span class="st">"四十三"</span>, </span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>     <span class="st">"四十四"</span>, <span class="st">"四十五"</span>, <span class="st">"四十六"</span>, <span class="st">"四十七"</span>, <span class="st">"四十八"</span>, <span class="st">"四十九"</span>, <span class="st">"五十"</span>, <span class="st">"五十一"</span>, </span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>     <span class="st">"五十二"</span>, <span class="st">"五十三"</span>, <span class="st">"五十四"</span>, <span class="st">"五十五"</span>, <span class="st">"五十六"</span>, <span class="st">"五十七"</span>, <span class="st">"五十八"</span>, <span class="st">"五十九"</span>, </span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>     <span class="st">"六十"</span>, <span class="st">"六十一"</span>, <span class="st">"六十二"</span>, <span class="st">"六十三"</span>, <span class="st">"六十四"</span>, <span class="st">"六十五"</span>, <span class="st">"六十六"</span>, <span class="st">"六十七"</span>, </span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>     <span class="st">"六十八"</span>, <span class="st">"六十九"</span>, <span class="st">"七十"</span>, <span class="st">"七十一"</span>, <span class="st">"七十二"</span>, <span class="st">"七十三"</span>, <span class="st">"七十四"</span>, <span class="st">"七十五"</span>, </span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>     <span class="st">"七十六"</span>, <span class="st">"七十七"</span>, <span class="st">"七十八"</span>, <span class="st">"七十九"</span>, <span class="st">"八十"</span>, <span class="st">"八十一"</span>, <span class="st">"八十二"</span>, <span class="st">"八十三"</span>, </span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>     <span class="st">"八十四"</span>, <span class="st">"八十五"</span>, <span class="st">"八十六"</span>, <span class="st">"八十七"</span>, <span class="st">"八十八"</span>, <span class="st">"八十九"</span>, <span class="st">"九十"</span>, <span class="st">"九十一"</span>, </span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>     <span class="st">"九十二"</span>, <span class="st">"九十三"</span>, <span class="st">"九十四"</span>, <span class="st">"九十五"</span>, <span class="st">"九十六"</span>, <span class="st">"九十七"</span>, <span class="st">"九十八"</span>, <span class="st">"九十九"</span>, <span class="st">"百"</span>),</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>  <span class="at">pronunciation =</span> <span class="fu">c</span>(<span class="st">"れい"</span>, <span class="st">"いち"</span>, <span class="st">"に"</span>, <span class="st">"さん"</span>, <span class="st">"し"</span>, <span class="st">"ご"</span>, <span class="st">"ろく"</span>, <span class="st">"しち"</span>, <span class="st">"はち"</span>, <span class="st">"きゅう"</span>, <span class="st">"じゅう"</span>,</span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"じゅういち"</span>, <span class="st">"じゅうに"</span>, <span class="st">"じゅうさん"</span>, <span class="st">"じゅうし"</span>, <span class="st">"じゅうご"</span>, <span class="st">"じゅうろく"</span>, <span class="st">"じゅうしち"</span>, <span class="st">"じゅうはち"</span>, <span class="st">"じゅうきゅう"</span>,</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"にじゅう"</span>, <span class="st">"にじゅういち"</span>, <span class="st">"にじゅうに"</span>, <span class="st">"にじゅうさん"</span>, <span class="st">"にじゅうし"</span>, <span class="st">"にじゅうご"</span>, <span class="st">"にじゅうろく"</span>, <span class="st">"にじゅうしち"</span>, <span class="st">"にじゅうはち"</span>, <span class="st">"にじゅうきゅう"</span>,</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"さんじゅう"</span>, <span class="st">"さんじゅういち"</span>, <span class="st">"さんじゅうに"</span>, <span class="st">"さんじゅうさん"</span>, <span class="st">"さんじゅうし"</span>, <span class="st">"さんじゅうご"</span>, <span class="st">"さんじゅうろく"</span>, <span class="st">"さんじゅうしち"</span>, <span class="st">"さんじゅうはち"</span>, <span class="st">"さんじゅうきゅう"</span>,</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"よんじゅう"</span>, <span class="st">"よんじゅういち"</span>, <span class="st">"よんじゅうに"</span>, <span class="st">"よんじゅうさん"</span>, <span class="st">"よんじゅうし"</span>, <span class="st">"よんじゅうご"</span>, <span class="st">"よんじゅうろく"</span>, <span class="st">"よんじゅうしち"</span>, <span class="st">"よんじゅうはち"</span>, <span class="st">"よんじゅうきゅう"</span>,</span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"ごじゅう"</span>, <span class="st">"ごじゅういち"</span>, <span class="st">"ごじゅうに"</span>, <span class="st">"ごじゅうさん"</span>, <span class="st">"ごじゅうし"</span>, <span class="st">"ごじゅうご"</span>, <span class="st">"ごじゅうろく"</span>, <span class="st">"ごじゅうしち"</span>, <span class="st">"ごじゅうはち"</span>, <span class="st">"ごじゅうきゅう"</span>,</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"ろくじゅう"</span>, <span class="st">"ろくじゅういち"</span>, <span class="st">"ろくじゅうに"</span>, <span class="st">"ろくじゅうさん"</span>, <span class="st">"ろくじゅうし"</span>, <span class="st">"ろくじゅうご"</span>, <span class="st">"ろくじゅうろく"</span>, <span class="st">"ろくじゅうしち"</span>, <span class="st">"ろくじゅうはち"</span>, <span class="st">"ろくじゅうきゅう"</span>,</span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"しちじゅう"</span>, <span class="st">"しちじゅういち"</span>, <span class="st">"しちじゅうに"</span>, <span class="st">"しちじゅうさん"</span>, <span class="st">"しちじゅうし"</span>, <span class="st">"しちじゅうご"</span>, <span class="st">"しちじゅうろく"</span>, <span class="st">"しちじゅうしち"</span>, <span class="st">"しちじゅうはち"</span>, <span class="st">"しちじゅうきゅう"</span>,</span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"はちじゅう"</span>, <span class="st">"はちじゅういち"</span>, <span class="st">"はちじゅうに"</span>, <span class="st">"はちじゅうさん"</span>, <span class="st">"はちじゅうし"</span>, <span class="st">"はちじゅうご"</span>, <span class="st">"はちじゅうろく"</span>, <span class="st">"はちじゅうしち"</span>, <span class="st">"はちじゅうはち"</span>, <span class="st">"はちじゅうきゅう"</span>,</span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"きゅうじゅう"</span>, <span class="st">"きゅうじゅういち"</span>, <span class="st">"きゅうじゅうに"</span>, <span class="st">"きゅうじゅうさん"</span>, <span class="st">"きゅうじゅうし"</span>, <span class="st">"きゅうじゅうご"</span>, <span class="st">"きゅうじゅうろく"</span>, <span class="st">"きゅうじゅうしち"</span>, <span class="st">"きゅうじゅうはち"</span>, <span class="st">"きゅうじゅうきゅう"</span>,</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"ひゃく"</span>),</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>  <span class="at">meaning =</span> <span class="fu">as.character</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">100</span>)</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="co"># Sentence list ####</span></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>data_sentences1 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="fu">here</span>(<span class="st">"data/kanji"</span>, file_sentences1)) </span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>data_sentences2 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="fu">here</span>(<span class="st">"data/kanji"</span>, file_sentences2))</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>data_sentences <span class="ot">&lt;-</span> <span class="fu">rbind</span>(data_sentences1, data_sentences2)</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(data_sentences1, data_sentences2)</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract kana ####</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>hiragana_chars <span class="ot">&lt;-</span> <span class="fu">intToUtf8</span>(<span class="fu">seq</span>(<span class="dv">12353</span>, <span class="dv">12438</span>)) <span class="co"># Unicode range for hiragana characters</span></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>katakana_chars <span class="ot">&lt;-</span> <span class="fu">intToUtf8</span>(<span class="fu">seq</span>(<span class="dv">12448</span>, <span class="dv">12543</span>)) <span class="co"># Unicode range for katakana characters</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>kana <span class="ot">&lt;-</span> <span class="fu">paste0</span>(hiragana_chars, katakana_chars) <span class="sc">%&gt;%</span> </span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split_1</span>(<span class="at">pattern =</span> <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a><span class="co"># All data ####</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>data_bind <span class="ot">&lt;-</span> data_words <span class="sc">%&gt;%</span> </span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(data_sentences <span class="sc">%&gt;%</span> <span class="fu">select</span>(word, pronunciation, meaning),</span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>        data_numbers,</span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>        data_jukugo) <span class="sc">%&gt;%</span> </span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">str_remove_all</span>(word, <span class="st">"[ a-zA-Z]"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(word, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-106"><a href="#cb1-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-107"><a href="#cb1-107" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract kanji ####</span></span>
<span id="cb1-108"><a href="#cb1-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-109"><a href="#cb1-109" aria-hidden="true" tabindex="-1"></a>all_kanji <span class="ot">&lt;-</span> data_kanji <span class="sc">%&gt;%</span> </span>
<span id="cb1-110"><a href="#cb1-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(kanji) <span class="sc">%&gt;%</span> </span>
<span id="cb1-111"><a href="#cb1-111" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(data_bind <span class="sc">%&gt;%</span> </span>
<span id="cb1-112"><a href="#cb1-112" aria-hidden="true" tabindex="-1"></a>          <span class="fu">mutate</span>(<span class="at">kanji =</span> word, <span class="at">.keep =</span> <span class="st">"none"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-113"><a href="#cb1-113" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">kanji =</span> <span class="fu">str_remove_all</span>(kanji, kana)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-114"><a href="#cb1-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(kanji <span class="sc">!=</span> <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-115"><a href="#cb1-115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb1-116"><a href="#cb1-116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="at">collapse =</span> <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-117"><a href="#cb1-117" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split_1</span>(<span class="at">pattern =</span> <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-118"><a href="#cb1-118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb1-119"><a href="#cb1-119" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb1-120"><a href="#cb1-120" aria-hidden="true" tabindex="-1"></a><span class="do">## Separate individual kanji from all words ####</span></span>
<span id="cb1-121"><a href="#cb1-121" aria-hidden="true" tabindex="-1"></a>data_all <span class="ot">&lt;-</span> data_bind <span class="sc">%&gt;%</span> </span>
<span id="cb1-122"><a href="#cb1-122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">kanji =</span> <span class="fu">str_remove_all</span>(word, kana)) <span class="sc">%&gt;%</span> </span>
<span id="cb1-123"><a href="#cb1-123" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_wider_position</span>(kanji, <span class="at">widths =</span> <span class="fu">c</span>(<span class="st">"kanji_1"</span> <span class="ot">=</span> <span class="dv">1</span>, </span>
<span id="cb1-124"><a href="#cb1-124" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"kanji_2"</span> <span class="ot">=</span> <span class="dv">2</span>,</span>
<span id="cb1-125"><a href="#cb1-125" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"kanji_3"</span> <span class="ot">=</span> <span class="dv">3</span>,</span>
<span id="cb1-126"><a href="#cb1-126" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"kanji_4"</span> <span class="ot">=</span> <span class="dv">4</span>,</span>
<span id="cb1-127"><a href="#cb1-127" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"kanji_5"</span> <span class="ot">=</span> <span class="dv">5</span>),</span>
<span id="cb1-128"><a href="#cb1-128" aria-hidden="true" tabindex="-1"></a>                          <span class="at">too_few =</span> <span class="st">"align_start"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-129"><a href="#cb1-129" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(kanji_1))</span>
<span id="cb1-130"><a href="#cb1-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-131"><a href="#cb1-131" aria-hidden="true" tabindex="-1"></a><span class="fu">flextable</span>(<span class="fu">head</span>(data_all))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="tabwid"><style>.cl-1864bdba{}.cl-185467bc{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-1857bade{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-1857cff6{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1857d000{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-1857d001{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-1864bdba"><thead><tr style="overflow-wrap:break-word;"><th class="cl-1857cff6"><p class="cl-1857bade"><span class="cl-185467bc">word</span></p></th><th class="cl-1857cff6"><p class="cl-1857bade"><span class="cl-185467bc">pronunciation</span></p></th><th class="cl-1857cff6"><p class="cl-1857bade"><span class="cl-185467bc">meaning</span></p></th><th class="cl-1857cff6"><p class="cl-1857bade"><span class="cl-185467bc">kanji_1</span></p></th><th class="cl-1857cff6"><p class="cl-1857bade"><span class="cl-185467bc">kanji_2</span></p></th><th class="cl-1857cff6"><p class="cl-1857bade"><span class="cl-185467bc">kanji_3</span></p></th><th class="cl-1857cff6"><p class="cl-1857bade"><span class="cl-185467bc">kanji_4</span></p></th><th class="cl-1857cff6"><p class="cl-1857bade"><span class="cl-185467bc">kanji_5</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">見る</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">みる</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">see, look at</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">見</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">円</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">えん</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">circle</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">円</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">多い</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">おおい</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">lots of</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">多</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">家</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">うち</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">house, home</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">家</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">新しい</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">あたらしい</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">new</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc">新</span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d000"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-1857d001"><p class="cl-1857bade"><span class="cl-185467bc">私</span></p></td><td class="cl-1857d001"><p class="cl-1857bade"><span class="cl-185467bc">わたし</span></p></td><td class="cl-1857d001"><p class="cl-1857bade"><span class="cl-185467bc">I</span></p></td><td class="cl-1857d001"><p class="cl-1857bade"><span class="cl-185467bc">私</span></p></td><td class="cl-1857d001"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d001"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d001"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td><td class="cl-1857d001"><p class="cl-1857bade"><span class="cl-185467bc"></span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Here’s a breakdown of the final “dictionary”:</p>
<ul>
<li><code>word</code>: This column contains the Japanese word.</li>
<li><code>pronunciation</code>: It shows the pronunciation of the word.</li>
<li><code>meaning</code>: This column provides the English translation or meaning of the word.</li>
<li><code>kanji_1</code>, <code>kanji_2</code>, <code>kanji_3</code>, <code>kanji_4</code>, <code>kanji_5</code>: These columns represents the kanji characters that compose each word.</li>
</ul>
<p>Each row corresponds to a different Japanese word, and the columns contain related information about each word, including its pronunciation, meaning in English, and associated kanji characters.</p>
<p>For example:</p>
<ul>
<li>The word “見る” (miru) means “see, look at”, and its associated kanji is “見”.</li>
<li>The word “円” (en) means “circle”, and its associated kanji is “円”.</li>
<li>The word “多い” (ooi) means “lots of”, and its associated kanji is “多”.</li>
</ul>
</section>
<section id="custom-functions-to-create-the-study-table" class="level2">
<h2 class="anchored" data-anchor-id="custom-functions-to-create-the-study-table">Custom Functions to Create the Study Table</h2>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Functions ####</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>make_study_list <span class="ot">&lt;-</span> <span class="cf">function</span>(kanji_learning) {</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select words with only those kanji</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  study_words <span class="ot">&lt;-</span> data_all <span class="sc">%&gt;%</span> </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(kanji_1 <span class="sc">%in%</span> kanji_learning,  </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>             kanji_2 <span class="sc">%in%</span> kanji_learning <span class="sc">|</span> <span class="fu">is.na</span>(kanji_2),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>             kanji_3 <span class="sc">%in%</span> kanji_learning <span class="sc">|</span> <span class="fu">is.na</span>(kanji_3),</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>             kanji_4 <span class="sc">%in%</span> kanji_learning <span class="sc">|</span> <span class="fu">is.na</span>(kanji_4),</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>             kanji_5 <span class="sc">%in%</span> kanji_learning <span class="sc">|</span> <span class="fu">is.na</span>(kanji_5)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">!</span><span class="fu">starts_with</span>(<span class="st">"kanji_"</span>))</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  study_words</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>make_sentences_list <span class="ot">&lt;-</span> <span class="cf">function</span>(kanji_learning) {</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  kanji_list <span class="ot">&lt;-</span> <span class="fu">paste</span>(kanji_learning, <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  letters_lower <span class="ot">&lt;-</span> <span class="fu">paste</span>(letters, <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  letters_upper <span class="ot">&lt;-</span> <span class="fu">paste</span>(LETTERS, <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  numbers <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">9</span>, <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  symbols <span class="ot">&lt;-</span> <span class="st">"。|、|「|」|？|!|%|！|々"</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  other_characters <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">c</span>(letters_lower, letters_upper, numbers, symbols), <span class="at">collapse =</span> <span class="st">"|"</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>  sentences_list <span class="ot">&lt;-</span> data_sentences <span class="sc">%&gt;%</span> </span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">only_kanji =</span> <span class="fu">str_remove_all</span>(sentence, <span class="fu">paste</span>(kana, other_characters, <span class="at">sep =</span> <span class="st">"|"</span>)),</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>           <span class="at">unknown_kanji =</span> <span class="fu">str_remove_all</span>(only_kanji, kanji_list)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(unknown_kanji <span class="sc">==</span> <span class="st">""</span>, <span class="fu">grepl</span>(kanji_list, sentence)) <span class="sc">%&gt;%</span> </span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(sentence, sentence_hiragana, sentence_meaning)</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>  sentences_list</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This code defines two functions: <code>make_study_list</code> and <code>make_sentences_list</code>. Let’s break down what each function does:</p>
<ol type="1">
<li><strong><code>make_study_list</code> function</strong>:</li>
</ol>
<ul>
<li><strong>Input</strong>: <code>kanji_learning</code> is a vector containing the kanji characters that the user wants to learn.</li>
<li><strong>Output</strong>: <code>study_words</code> is a data frame containing words from <code>data_all</code> dataset that contain only the kanji characters specified in <code>kanji_learning</code>.</li>
<li><strong>Functionality</strong>:
<ul>
<li>Filters the <code>data_all</code> dataset to select words that contain only the kanji characters specified in <code>kanji_learning</code>.</li>
<li>This is done by filtering the rows where each kanji column (<code>kanji_1</code>, <code>kanji_2</code>, <code>kanji_3</code>, <code>kanji_4</code>, <code>kanji_5</code>) matches one of the kanji characters in <code>kanji_learning</code>, or where the kanji column is <code>NA</code> (missing).</li>
<li>Removes the <code>kanji_</code> columns from the resulting dataset.</li>
<li>Returns the filtered dataset containing only the selected words.</li>
</ul></li>
</ul>
<ol start="2" type="1">
<li><strong><code>make_sentences_list</code> function</strong>:</li>
</ol>
<ul>
<li><strong>Input</strong>: <code>kanji_learning</code> is a vector containing the kanji characters that the user wants to learn.</li>
<li><strong>Output</strong>: <code>sentences_list</code> is a data frame containing sentences from <code>data_sentences</code> dataset that contain kanji characters specified in <code>kanji_learning</code>.</li>
<li><strong>Functionality</strong>:
<ul>
<li>Concatenates the kanji characters in <code>kanji_learning</code> into a single regular expression pattern <code>kanji_list</code>.</li>
<li>Defines regular expression patterns for lowercase letters, uppercase letters, numbers, and symbols.</li>
<li>Uses these patterns to define other_characters, which includes all characters that are not kanji.</li>
<li>For each sentence in <code>data_sentences</code>, removes all characters that are not kanji, then removes all kanji characters that are not in <code>kanji_learning</code>.</li>
<li>Filters the sentences to keep only those that contain kanji characters specified in <code>kanji_learning</code>.</li>
<li>Selects the filtered sentences along with their corresponding hiragana representation and meaning.</li>
</ul></li>
<li><strong>Note</strong>: The <code>str_remove_all</code> function from the stringr package is used to remove all occurrences of a pattern from a string.</li>
</ul>
<p>These functions are designed to help users generate study lists of words and sentences containing specific kanji characters they want to learn.</p>
</section>
<section id="shiny-app-code" class="level2">
<h2 class="anchored" data-anchor-id="shiny-app-code">Shiny App Code</h2>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Shiny App ####</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>ui <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">"List Japanese Words Including Selected Kanji"</span>),</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">p</span>(<span class="st">"Created by CarlosEpiStats"</span>),</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">uiOutput</span>(<span class="st">"blog_link"</span>),</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">downloadButton</span>(<span class="st">"downloadExcel"</span>, <span class="st">"Download Excel file"</span>),</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">downloadButton</span>(<span class="st">"downloadCSV"</span>, <span class="st">"Download CSV file"</span>),</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">selectInput</span> (<span class="st">"kanji_selected"</span>, <span class="st">"Select Kanji:"</span>,  </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">choices =</span> all_kanji, <span class="at">multiple =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">tabsetPanel</span>(</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanel</span>(</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>          <span class="st">"List of words"</span>,</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>          <span class="fu">textOutput</span>(<span class="st">"n_kanji"</span>),</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>          <span class="fu">textOutput</span>(<span class="st">"n_words"</span>),</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>          <span class="fu">DTOutput</span>(<span class="st">"table_words"</span>)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>          ),</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanel</span>(</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>          <span class="st">"List of sentences"</span>,</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>          <span class="fu">textOutput</span>(<span class="st">"n_sentences"</span>),</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>          <span class="fu">DTOutput</span>(<span class="st">"table_sentences"</span>)</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tabPanel</span>(</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Stats"</span>,</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>          <span class="fu">tableOutput</span>(<span class="st">"number_words_per_kanji"</span>)</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Blog link ####</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">&lt;-</span> <span class="fu">a</span>(<span class="st">"CarlosEpiStats"</span>, <span class="at">href=</span><span class="st">"https://carlosepistats.github.io/blog/"</span>)</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>blog_link <span class="ot">&lt;-</span> <span class="fu">renderUI</span>({</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tagList</span>(<span class="st">"Blog:"</span>, url)</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reactive table words ####</span></span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>  rval_table_words <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>    study_table <span class="ot">&lt;-</span> <span class="fu">make_study_list</span>(input<span class="sc">$</span>kanji_selected)</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>    study_table</span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reactive table sentences ####</span></span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>  rval_table_sentences <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>    study_table <span class="ot">&lt;-</span> <span class="fu">make_sentences_list</span>(input<span class="sc">$</span>kanji_selected)</span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>    study_table</span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reactive table counter ####</span></span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>  rval_table_counter <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>    study_words <span class="ot">&lt;-</span> data_all <span class="sc">%&gt;%</span> </span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(kanji_1 <span class="sc">%in%</span> input<span class="sc">$</span>kanji_selected, </span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>             kanji_2 <span class="sc">%in%</span> input<span class="sc">$</span>kanji_selected <span class="sc">|</span> <span class="fu">is.na</span>(kanji_2),</span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>             kanji_3 <span class="sc">%in%</span> input<span class="sc">$</span>kanji_selected <span class="sc">|</span> <span class="fu">is.na</span>(kanji_3),</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>             kanji_4 <span class="sc">%in%</span> input<span class="sc">$</span>kanji_selected <span class="sc">|</span> <span class="fu">is.na</span>(kanji_4),</span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>             kanji_5 <span class="sc">%in%</span> input<span class="sc">$</span>kanji_selected <span class="sc">|</span> <span class="fu">is.na</span>(kanji_5))</span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>    learning_length <span class="ot">&lt;-</span> <span class="fu">length</span>(input<span class="sc">$</span>kanji_selected)</span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>    kanji_counter <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>learning_length){</span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>      kanji_counter[i] <span class="ot">&lt;-</span> study_words <span class="sc">%&gt;%</span> </span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(kanji_1 <span class="sc">%in%</span> input<span class="sc">$</span>kanji_selected[i] <span class="sc">|</span> </span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>                 kanji_2 <span class="sc">%in%</span> input<span class="sc">$</span>kanji_selected[i] <span class="sc">|</span> </span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>                 kanji_3 <span class="sc">%in%</span> input<span class="sc">$</span>kanji_selected[i] <span class="sc">|</span></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>                 kanji_4 <span class="sc">%in%</span> input<span class="sc">$</span>kanji_selected[i] <span class="sc">|</span> </span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>                 kanji_5 <span class="sc">%in%</span> input<span class="sc">$</span>kanji_selected[i] ) <span class="sc">%&gt;%</span> </span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>        <span class="fu">nrow</span>()</span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>    table_counter <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">kanji =</span> input<span class="sc">$</span>kanji_selected,</span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>                                <span class="at">times =</span> kanji_counter)</span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>    table_counter</span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reactive number kanji ####</span></span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>  rval_n_kanji <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>    number_words <span class="ot">&lt;-</span> <span class="fu">length</span>(input<span class="sc">$</span>kanji_selected)</span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>    number_words</span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>  }) </span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reactive number words ####</span></span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>  rval_n_words <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>    study_table <span class="ot">&lt;-</span> <span class="fu">rval_table_words</span>()</span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>    number_words <span class="ot">&lt;-</span> <span class="fu">nrow</span>(study_table)</span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>    number_words</span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reactive number sentences ####</span></span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>  rval_n_sentences <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>    study_table <span class="ot">&lt;-</span> <span class="fu">rval_table_sentences</span>()</span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a>    number_sentences <span class="ot">&lt;-</span> <span class="fu">nrow</span>(study_table)</span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a>    number_sentences</span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a>  <span class="co"># output number words ####</span></span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>n_words <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a>    n_words <span class="ot">&lt;-</span> <span class="fu">rval_n_words</span>()</span>
<span id="cb3-128"><a href="#cb3-128" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">"Number of words: "</span>, n_words)</span>
<span id="cb3-129"><a href="#cb3-129" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-130"><a href="#cb3-130" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-131"><a href="#cb3-131" aria-hidden="true" tabindex="-1"></a>  <span class="co"># output number Kanji ####</span></span>
<span id="cb3-132"><a href="#cb3-132" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>n_kanji <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb3-133"><a href="#cb3-133" aria-hidden="true" tabindex="-1"></a>    number_kanji <span class="ot">&lt;-</span> <span class="fu">rval_n_kanji</span>()</span>
<span id="cb3-134"><a href="#cb3-134" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">"Number of kanji: "</span>, number_kanji)</span>
<span id="cb3-135"><a href="#cb3-135" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-136"><a href="#cb3-136" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-137"><a href="#cb3-137" aria-hidden="true" tabindex="-1"></a>  <span class="co"># output number sentences ####</span></span>
<span id="cb3-138"><a href="#cb3-138" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>n_sentences <span class="ot">&lt;-</span> <span class="fu">renderText</span>({</span>
<span id="cb3-139"><a href="#cb3-139" aria-hidden="true" tabindex="-1"></a>    number_sentences <span class="ot">&lt;-</span> <span class="fu">rval_n_sentences</span>()</span>
<span id="cb3-140"><a href="#cb3-140" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">"Number of sentences: "</span>, number_sentences)</span>
<span id="cb3-141"><a href="#cb3-141" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-142"><a href="#cb3-142" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-143"><a href="#cb3-143" aria-hidden="true" tabindex="-1"></a>  <span class="co"># output table words ####</span></span>
<span id="cb3-144"><a href="#cb3-144" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>table_words <span class="ot">&lt;-</span> <span class="fu">renderDT</span>({</span>
<span id="cb3-145"><a href="#cb3-145" aria-hidden="true" tabindex="-1"></a>    study_table <span class="ot">&lt;-</span> <span class="fu">rval_table_words</span>()</span>
<span id="cb3-146"><a href="#cb3-146" aria-hidden="true" tabindex="-1"></a>    study_table</span>
<span id="cb3-147"><a href="#cb3-147" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-148"><a href="#cb3-148" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-149"><a href="#cb3-149" aria-hidden="true" tabindex="-1"></a>  <span class="co"># output table sentences ####</span></span>
<span id="cb3-150"><a href="#cb3-150" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>table_sentences <span class="ot">&lt;-</span> <span class="fu">renderDT</span>({</span>
<span id="cb3-151"><a href="#cb3-151" aria-hidden="true" tabindex="-1"></a>    study_table <span class="ot">&lt;-</span> <span class="fu">rval_table_sentences</span>()</span>
<span id="cb3-152"><a href="#cb3-152" aria-hidden="true" tabindex="-1"></a>    study_table</span>
<span id="cb3-153"><a href="#cb3-153" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-154"><a href="#cb3-154" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-155"><a href="#cb3-155" aria-hidden="true" tabindex="-1"></a>  <span class="co"># output table counter ####</span></span>
<span id="cb3-156"><a href="#cb3-156" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-157"><a href="#cb3-157" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>number_words_per_kanji <span class="ot">&lt;-</span> <span class="fu">renderTable</span>({</span>
<span id="cb3-158"><a href="#cb3-158" aria-hidden="true" tabindex="-1"></a>    table_counter <span class="ot">&lt;-</span> <span class="fu">rval_table_counter</span>()</span>
<span id="cb3-159"><a href="#cb3-159" aria-hidden="true" tabindex="-1"></a>    table_counter</span>
<span id="cb3-160"><a href="#cb3-160" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb3-161"><a href="#cb3-161" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-162"><a href="#cb3-162" aria-hidden="true" tabindex="-1"></a>  <span class="co"># download Excel ####</span></span>
<span id="cb3-163"><a href="#cb3-163" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-164"><a href="#cb3-164" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>downloadExcel <span class="ot">&lt;-</span> <span class="fu">downloadHandler</span>(</span>
<span id="cb3-165"><a href="#cb3-165" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-166"><a href="#cb3-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">filename =</span> <span class="cf">function</span>() {</span>
<span id="cb3-167"><a href="#cb3-167" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"study_list_k"</span>, <span class="fu">rval_n_kanji</span>(), <span class="st">"_w"</span>, <span class="fu">rval_n_words</span>(),<span class="st">".xlsx"</span>)</span>
<span id="cb3-168"><a href="#cb3-168" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb3-169"><a href="#cb3-169" aria-hidden="true" tabindex="-1"></a>    <span class="at">content =</span> <span class="cf">function</span>(file) {</span>
<span id="cb3-170"><a href="#cb3-170" aria-hidden="true" tabindex="-1"></a>      <span class="fu">write_xlsx</span>(<span class="fu">rval_table_words</span>(), file)</span>
<span id="cb3-171"><a href="#cb3-171" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-172"><a href="#cb3-172" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb3-173"><a href="#cb3-173" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-174"><a href="#cb3-174" aria-hidden="true" tabindex="-1"></a>  <span class="co"># download CSV ####</span></span>
<span id="cb3-175"><a href="#cb3-175" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-176"><a href="#cb3-176" aria-hidden="true" tabindex="-1"></a>  output<span class="sc">$</span>downloadCSV <span class="ot">&lt;-</span> <span class="fu">downloadHandler</span>(</span>
<span id="cb3-177"><a href="#cb3-177" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb3-178"><a href="#cb3-178" aria-hidden="true" tabindex="-1"></a>    <span class="at">filename =</span> <span class="cf">function</span>() {</span>
<span id="cb3-179"><a href="#cb3-179" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"study_list_k"</span>, <span class="fu">rval_n_kanji</span>(), <span class="st">"_w"</span>, <span class="fu">rval_n_words</span>(),<span class="st">".csv"</span>)</span>
<span id="cb3-180"><a href="#cb3-180" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb3-181"><a href="#cb3-181" aria-hidden="true" tabindex="-1"></a>    <span class="at">content =</span> <span class="cf">function</span>(file) {</span>
<span id="cb3-182"><a href="#cb3-182" aria-hidden="true" tabindex="-1"></a>      <span class="fu">write_csv</span>(<span class="fu">rval_table_words</span>(), file)</span>
<span id="cb3-183"><a href="#cb3-183" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb3-184"><a href="#cb3-184" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb3-185"><a href="#cb3-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-186"><a href="#cb3-186" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-187"><a href="#cb3-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-188"><a href="#cb3-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-189"><a href="#cb3-189" aria-hidden="true" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> ui, <span class="at">server =</span> server)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This code defines a Shiny web application that allows users to generate lists of Japanese words and sentences containing specific kanji characters they want to learn. Here’s an explanation of the key components:</p>
<ol type="1">
<li><strong>User Interface Definition (<code>ui</code>)</strong>:</li>
</ol>
<ul>
<li>The UI is defined using <code>fluidPage</code> layout.</li>
<li>It consists of a title panel, a sidebar layout with a sidebar panel containing download buttons and a select input to choose kanji characters, and a main panel containing tabs to display the lists of words and sentences.</li>
<li>The tabs include a list of words, a list of sentences, and a stats tab.</li>
<li>Various output elements like text, tables, and DT (DataTables) are defined to display data.</li>
</ul>
<ol start="2" type="1">
<li><strong>Server Logic (<code>server</code>)</strong>:</li>
</ol>
<ul>
<li>The server logic defines the functionality of the Shiny app.</li>
<li>It contains reactive expressions to dynamically update the output elements based on user input.</li>
<li>It defines functions to generate lists of words and sentences based on selected kanji characters (<code>make_study_list</code> and <code>make_sentences_list</code>).</li>
<li>It calculates the number of occurrences of each kanji character in the selected words and displays them in a table on the “Stats” tab.</li>
<li>It provides output functions to display the generated lists of words and sentences.</li>
<li>It includes download handlers to allow users to download the generated lists in Excel and CSV formats.</li>
</ul>
<ol start="3" type="1">
<li><strong>ShinyApp function</strong>:</li>
</ol>
<ul>
<li>The <code>shinyApp</code> function combines the UI and server logic to create the Shiny application.</li>
</ul>
<p>Overall, this Shiny app provides an interactive interface for users to explore and download lists of Japanese words and sentences containing specific kanji characters they are interested in learning.</p>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<ul>
<li><a href="https://www.kanjidatabase.com/index.php">Kanji database</a>.</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="CarlosEpiStats/blogComments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>